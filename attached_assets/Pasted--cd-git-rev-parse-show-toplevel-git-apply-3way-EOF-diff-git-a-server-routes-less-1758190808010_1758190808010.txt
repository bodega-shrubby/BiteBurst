 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/server/routes/lessons.ts b/server/routes/lessons.ts
index 9889bf2195b7e327bbd3689acd5bc0b4f440878d..8fec399713a1d18b3ee210c656e4a176db10c7d1 100644
--- a/server/routes/lessons.ts
+++ b/server/routes/lessons.ts
@@ -19,123 +19,126 @@ export function registerLessonRoutes(app: Express, requireAuth: any) {
       // For now, return hardcoded "Fuel for Football" lesson data
       // In the future, this would come from the database
       if (lessonId === 'fuel-for-football') {
         const lessonData = {
           id: 'fuel-for-football',
           title: 'Fuel for Football',
           description: 'Learn the best foods to eat before and during football training!',
           totalSteps: 4,
           steps: [
             {
               id: 'step-1',
               stepNumber: 1,
               questionType: 'multiple-choice' as const,
               question: "What's the best breakfast before football training?",
               content: {
                 options: [
                   { id: 'porridge', text: 'Porridge with fruit', emoji: 'ðŸ¥£', correct: true },
                   { id: 'croissant', text: 'Croissant with jam', emoji: 'ðŸ¥', correct: false },
                   { id: 'fizzy', text: 'Fizzy drink', emoji: 'ðŸ¥¤', correct: false }
                 ],
                 feedback: "Yes! Oats give long energy and fruit adds vitamins. That's why players eat porridge before training â€” it keeps them running all game!"
               },
               xpReward: 10,
               mascotAction: 'holding_football',
               retryConfig: {
-                maxAttempts: 2,
+                maxAttempts: 3,
                 xp: { firstTry: 10, secondTry: 5, learnCard: 0 },
                 messages: {
                   tryAgain1: "Not quite â€” think steady energy that lasts the whole session.",
                   tryAgain2: "Almost! Which breakfast keeps you running, not just at the start?",
                   learnCard: "Porridge gives slow, steady energy and fruit adds vitamins â€” perfect to keep you running till the final whistle."
                 }
               }
             },
             {
               id: 'step-2',
               stepNumber: 2,
               questionType: 'true-false' as const,
               question: "Water helps footballers stay strong for the whole game.",
               content: {
                 correctAnswer: true,
                 feedback: "Correct! Even Messi drinks water at half-time. It cools your body and keeps you fast."
               },
               xpReward: 10,
               mascotAction: 'sipping_water',
               retryConfig: {
-                maxAttempts: 2,
+                maxAttempts: 3,
                 xp: { firstTry: 10, secondTry: 5, learnCard: 0 },
                 messages: {
                   tryAgain1: "Try again â€” players drink water so they don't slow down later.",
+                  tryAgain2: "One more go! Staying hydrated keeps your passes sharp all game.",
                   learnCard: "Even a bit of dehydration makes you slow and tired. Water keeps you cool and fast for the match."
                 }
               }
             },
             {
               id: 'step-3',
               stepNumber: 3,
               questionType: 'matching' as const,
               question: "Match the food to its benefit.",
               content: {
                 matchingPairs: [
                   { left: 'ðŸ¥¦ Broccoli', right: 'Vitamins for stamina' },
                   { left: 'ðŸ¥£ Yogurt with berries', right: 'Recovery fuel for muscles' },
                   { left: 'ðŸ¥š Boiled egg', right: 'Protein for strength' }
                 ],
                 feedback: "Perfect matches! Each food gives your body exactly what it needs for football."
               },
               xpReward: 15,
               mascotAction: 'juggling_football',
               retryConfig: {
-                maxAttempts: 2,
+                maxAttempts: 3,
                 xp: { firstTry: 15, secondTry: 8, learnCard: 0 },
                 messages: {
                   tryAgain1: "Some matches aren't right â€” think stamina, recovery, and strength.",
+                  tryAgain2: "Keep matching! Each food helps with a different football superpower.",
                   learnCard: "ðŸ¥¦ Broccoli: vitamins to keep you going.\nðŸ¥£ Yogurt + berries: helps muscles recover after play.\nðŸ¥š Egg: protein for strong legs to kick harder."
                 }
               }
             },
             {
               id: 'step-4',
               stepNumber: 4,
               questionType: 'multiple-choice' as const,
               question: "What's the best half-time snack to keep your energy up?",
               content: {
                 options: [
                   { id: 'chocolate', text: 'Chocolate bar', emoji: 'ðŸ«', correct: false },
                   { id: 'banana', text: 'Banana', emoji: 'ðŸŒ', correct: true },
                   { id: 'crisps', text: 'Crisps', emoji: 'ðŸŸ', correct: false }
                 ],
                 feedback: "Perfect! Bananas give quick energy to refuel your legs so you can sprint again in the second half â€” just like MbappÃ©."
               },
               xpReward: 10,
               mascotAction: 'high_five',
               retryConfig: {
-                maxAttempts: 2,
+                maxAttempts: 3,
                 xp: { firstTry: 10, secondTry: 5, learnCard: 0 },
                 messages: {
                   tryAgain1: "That's a quick burstâ€¦ but you'll slow down after. Pick one that refuels your legs.",
+                  tryAgain2: "Think of something light that players grab at half-time for energy.",
                   learnCard: "Banana gives quick, clean energy so you can sprint again in the second half."
                 }
               }
             }
           ]
         };
         
         return res.json(lessonData);
       }
       
       if (lessonId === 'brainfuel-for-school') {
         const lessonData = {
           id: 'brainfuel-for-school',
           title: 'BrainFuel for School',
           description: 'Learn the best foods to fuel your brain for exams and studying!',
           totalSteps: 6,
           steps: [
             {
               id: 'step-1',
               stepNumber: 1,
               questionType: 'multiple-choice' as const,
               question: "Which breakfast gives your brain the best fuel for a 2-hour exam?",
               content: {
                 options: [
                   { id: 'porridge-berries', text: 'Porridge with blueberries + milk', emoji: 'ðŸ¥£', correct: true },
 
EOF
)