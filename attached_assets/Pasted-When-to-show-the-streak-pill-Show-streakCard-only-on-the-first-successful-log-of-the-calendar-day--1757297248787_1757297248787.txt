When to show the streak pill
Show #streakCard only on the first successful log of the calendar day (in the userâ€™s timezone) if the streak increases.
Server-side rule (recommended)
Keep streak_days INT, longest_streak INT, last_log_at TIMESTAMP.
On new log:
Convert timestamps to the userâ€™s timezone (from profile; fallback to server TZ).
If sameCalendarDay(today, last_log_at) â†’ streak unchanged (donâ€™t show).
Else if today == last_log_at + 1 day â†’ streak_days += 1 (show).
Else â†’ streak_days = 1 (do not show a â€œstreak!â€ pillâ€”optionally show â€œStreak restartedâ€ microcopy later).
Update longest_streak = max(longest_streak, streak_days).
Return to client:
{ "streak_days": 4, "streak_changed": true, "badge_awarded": null }
Client-side gate (so it doesnâ€™t pop multiple times in a day)
Only reveal the pill if streak_changed === true.
Also guard with local storage:
localStorage['streakShownOn'] = YYYY-MM-DD.
If it matches today, keep it hidden even if the page reloads.
Display thresholds (copy)
For any streak â‰¥2: show the pill (e.g., â€œğŸ”¥ 2-day streak!â€).
Add celebratory copy at â€œmilestonesâ€: 3, 5, 7, 14, 30:
3 â†’ â€œYouâ€™re on a roll! ğŸ”¥ 3-day streak!â€
7 â†’ â€œOne whole week! ğŸŒŸ 7-day streak!â€
14 â†’ â€œTwo weeks strong! ğŸ’ª 14-day streak!â€
30 â†’ â€œLegend status! ğŸ† 30-day streak!â€
When to show the badge pill
Show #badgeCard only when a brand-new badge is awarded by the server on this log.
Server decides the badge logic and returns:
{ "badge_awarded": { "code": "WEEK_STREAK_7", "name": "One-Week Streak" } }
Client behavior
If present, unhide #badgeCard and set #badgeName to the returned name.
If both streak and badge happen together (e.g., day 7), show both pills; put the badge pill first.
Do you need a separate screen?
No for MVP.
Keep streak/badge as informational pills on the Feedback screen. Later you can add:
â€œAchievementsâ€ screen (grid of badges + streak history).
Tap on pill â†’ open a small modal with â€œHow streaks workâ€ and milestones. For MVP, keep pills non-interactive.
Minimal client hook (drop-in)
function revealRewards({ streak_days, streak_changed, badge_awarded }) {
  const rewards = document.getElementById('bb-rewards');
  const streakCard = document.getElementById('streakCard');
  const badgeCard  = document.getElementById('badgeCard');

  let shown = false;

  // Guard: only once per day
  const today = new Date().toISOString().slice(0,10);
  const lastShown = localStorage.getItem('streakShownOn');

  if (streak_changed && streak_days >= 2 && lastShown !== today) {
    document.getElementById('streakDays').textContent = String(streak_days);
    streakCard.hidden = false; shown = true;
    localStorage.setItem('streakShownOn', today);
  }

  if (badge_awarded?.name) {
    document.getElementById('badgeName').textContent = badge_awarded.name;
    badgeCard.hidden = false; shown = true;
  }

  rewards.hidden = !shown;
}
Server-side pseudocode (timezone-aware)
function updateStreak({ user, now, userTz }) {
  const today = toCalendarDate(now, userTz);           // YYYY-MM-DD in tz
  const last  = user.last_log_at ? toCalendarDate(user.last_log_at, userTz) : null;

  let streak_changed = false;
  if (!last) {
    user.streak_days = 1;
  } else if (isSameDay(today, last)) {
    // no change
  } else if (isNextDay(today, last)) {
    user.streak_days += 1;
    streak_changed = true;
  } else {
    user.streak_days = 1; // reset
  }

  user.longest_streak = Math.max(user.longest_streak || 1, user.streak_days);
  user.last_log_at = now;

  const badge_awarded = maybeAwardBadge(user); // returns {code, name} or null
  return { streak_days: user.streak_days, streak_changed, badge_awarded };
}
Copy guideline (friendly + brief)
Streak pill (default): ğŸ”¥ {n}-day streak!
Milestone variants:
3: ğŸ”¥ 3-day streakâ€”amazing!
7: ğŸŒŸ One-week streakâ€”keep going!
14: ğŸ’ª 14-day streakâ€”strong!
30: ğŸ† 30-day streakâ€”legend!
Summary
Show on Feedback screen only (no new screen).
Show streak pill once per day only when the streak increments.
Show badge pill only when a new badge is awarded by the server.
Keep logic server-driven, with client guards to prevent duplicate pops.